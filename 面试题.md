## 前端面试题

### 1.预编译习题 [文章地址](https://zhuanlan.zhihu.com/p/50236805)

```js
function fn(a, c) {
  console.log(a); // function a() {}
  var a = 123;
  console.log(a); // 123
  console.log(c); // function c() {}
  function a() {}
  if (false) {
    var d = 678;
  }
  console.log(d); // undefined
  console.log(b); // undefined
  var b = function () {}; // 这里b声明进行了域解析
  console.log(b); // function () {}
  function c() {}
  console.log(c);
}
fn(1, 2);

// 预编译
// 作用域的创建阶段 预编译阶段
// 预编译的时候做了哪些事情
// js的变量对象 AO对象 供js引擎自己去访问的
// 1 创建AO(Activation Object)对象
// 2 找形参和变量的声明 作为AO的属性名 值是undefined
// 3 实参和形参相统一
// 4 找函数声明 会覆盖变量声明
// GO (Global Object)
//
AO: {
  a: undefined 1 function a() {}
  c: undefined 2 function c() {}
  b: undefined
  d: undefined
  b: undefined
}
// js的解析执行 逐行执行
```

### 2. js this 指向

#### 在函数中直接使用

```js
function get(content) {
  console.log(content);
}
get("您好");
get.call(window, "您好");
```

#### 函数作为对象的方法被调用(谁调用我 我就指向谁)

```js
 var person = {
   name: '张三',
   run(time) {
     console.log(`${this.name} 在跑步 最多${time}min就不行了`)
   }
   person.run(30)
   person.run.call(person, 30)
 }
```

```js
// 1.函数的直接调用 this指向window
// 2. 作为对象的方法调用 this指向该对象
// 阿里笔试题
var name = 222;
var a = {
  name: 111,
  say() {
    console.log(this.name);
  },
};
var fun = a.say;
fun(); // fun.call(window) 222
a.say(); // a.say.call(a)  111

var b = {
  name: 333,
  say(fun) {
    fun(); // fun.call(window)
  },
};
b.say(a.say);
b.say = a.say;
b.say();
```

#### 箭头函数中的 this

- 箭头函数中的 this 是定义在函数的时候绑定的，而不是在执行函数的时候绑定。
- 箭头函数中，this 执行的固定化，并不是因为箭头函数内部有绑定 this 的机制，实际原有是箭头函数根本没有自己的 this,导致内部的 this 就是外层的代码块的 this。正是因为它没有 this。所以就**不能用作构造函数**
- 箭头函数中的 this 是定义函数的时候绑定

```js
var x = 11;
var obj = {
  x: 22,
  say: () => {
    console.log(this.x);
  },
};
obj.say(); // 11
```
- 所谓的定义时候绑定，就是this是继承自父执行上下文中的this，比如这里的箭头函数中的this.x，函数本身与say平级以key:value的形式，也就是箭头函数本身所在的对象为obj，而obj的父执行上下文就是window，因此这里的this.x实际上表示window.x，因此输出的是11

````js
var obj = {
  birth: 1990,
  getAge() {
    var b = this.birth;
    var fn = () => new Date().getFullYear() - this.birth;
    return fn()
  }
}
obj.getAge() // 31
````
- 例子中箭头函数本身是在getAge方法中定义的，因此，getAge方法的父执行上下文是obj，因此这里的this指向则为obj

